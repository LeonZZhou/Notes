Content-Type: text/x-zim-wiki
Wiki-Format: zim 0.4
Creation-Date: 2016-04-20T09:46:15+08:00

====== list ======
Created 星期三 20 四月 2016


1. [[/etc/apt/sources.list]]

3. PPA(Ubuntu)
	[[+Debian增加add-apt-repository]]
	ppa网址：https://launchpad.net/ubuntu/+ppas
	sudo add-apt-repository ppa:shnatsel/dnscrypt 
	sudo apt-get update（升级软件包仓库）
	sudo apt-install xxx
	
	   注意：使用该命令有可能导致Debian系统出现不稳定情况。
	
	   对于Ubuntu用户来说，安装一些PPA上的软件是一件简单的事情，然而对于Debian用户来说你经常会碰到如下情况“add-apt-repository: command not found, then you cannot add them … it is possible, although not recommended”。因此对于Debian或类Debian系统的用户，如果想要从PPA上面安装或更新软件包，可能需要下列脚本：
	  1 #!/bin/sh
	  2 if [ $# -eq 1 ]
	  3 then
	  4     ppa_name=`echo "$1" | cut -d ":" -f2-`
	  5 
	  6     if [ -z "$ppa_name" ]
	  7     then
	  8         echo "PPA name not found"
	  9         echo "Utility to add PPA repositories in your debian machine"
	 10         echo "$0/ppa ppa: user-name"
	 11     else
	 12         echo "$ppa_name"
	 13         echo "deb http://ppa.launchpad.net/$ppa_name/ubuntu maverick main" >> /etc/apt/sources.list
	 14         apt-get update > /dev/null 2>> /tmp/apt_add_key.txt                                                     
	 15         key=`cat /tmp/apt_add_key.txt | cut -d ""-f6 | cut -d"" -f3`
	 16         apt-key adv-keyserver keyserver.ubuntu.com-recv-keys $key
	 17         rm -rf /tmp/apt_add_key.txt
	 18     fi
	 19 else
	 20     echo "Utility to add PPA repositories in your debian machine"
	 21     echo "$0/ppa ppa: user-name"
	 22 fi
	
	保存这个脚本到/usr/bin目录下，名称为add-apt-repository，然后执行下列命令即可：
	  $ sudo chmod +x /usr/bin/add-apt-repository 
	  $ sudo chown root:root /usr/bin/add-apt-repository
	
	现在我们也可以使用 add-apt-repository 命令进行软件安装了。
	
	  $ sudo add-apt-repository ppa: nameget install dnscrypt-proxy 

	1024R/72D340A3
	sudo apt-key adv --keyserver \ keyserver.ubuntu.com --recv-keys 72D340A3
	sudo apt-get update
	sudo apt-get install xxx
	
	彻底删除PPA及其key:
	（参考http://blog.deepin.org/2013/11/how-to-remove-a-ppa-repository-completely/ ）
	1. [[/etc/apt/sources.list.d/ ]](找到并删除源的文件list和list.save)
		 或sudo add-apt-repository -r ppa:repository-name/subdirectory
	2. sudo apt-key del 72D340A3
		(key id 可以通过sudo apt-key list | grep -B 1 name)

