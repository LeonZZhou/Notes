Content-Type: text/x-zim-wiki
Wiki-Format: zim 0.4
Creation-Date: 2016-04-20T10:06:33+08:00

====== 添加PPA ======
Created 星期三 20 四月 2016

==== 1. PPA教程 ====
ppa网址：https://launchpad.net/ubuntu/+ppas
sudo add-apt-repository ppa:shnatsel/dnscrypt 
sudo apt-get update（升级软件包仓库）
sudo apt-get install xxx

	1024R/72D340A3
	sudo apt-key adv --keyserver \ keyserver.ubuntu.com --recv-keys 72D340A3
	

==== 2.彻底删除PPA及其key: ====
	（参考http://blog.deepin.org/2013/11/how-to-remove-a-ppa-repository-completely/ ）
	1. [[/etc/apt/sources.list.d/]]   (找到并删除源的文件list和list.save)
		 或sudo add-apt-repository -r ppa:repository-name/subdirectory
	2. sudo apt-key del 72D340A3
		(key id 可以通过sudo apt-key list | grep -B 1 name)
	3. 删除/etc/apt/sources.list 相关deb 

==== 3.Debian 增加 add-apt-repository 命令 ====

   注意：使用该命令有可能导致Debian系统出现不稳定情况。

   对于Ubuntu用户来说，安装一些PPA上的软件是一件简单的事情，然而对于Debian用户来说你经常会碰到如下情况“add-apt-repository: command not found, then you cannot add them … it is possible, although not recommended”。因此对于Debian或类Debian系统的用户，如果想要从PPA上面安装或更新软件包，可能需要下列脚本：
#!/bin/bash
if [ $# -eq 1 ]
NM=`uname -a && date`
NAME=`echo $NM | md5sum | cut -f1 -d" "`
then
  ppa_name=`echo "$1" | cut -d":" -f2 -s`
  if [ -z "$ppa_name" ]
  then
	echo "PPA name not found"
	echo "Utility to add PPA repositories in your debian machine"
	echo "$0 ppa:user/ppa-name"
  else
	echo "$ppa_name"
	echo "deb http://ppa.launchpad.net/$ppa_name/ubuntu oneiric main" >> /etc/apt/sources.list  ####oneiric 是Ubuntu版本代码，可以根据不同软件选用不同版本Ubuntu代码以最大保证系统稳定性，**可选的有xenial(16.04) wily(15.10) vivid(15.04) Utopic(14.10) trusty(14.04) saucy(13.10) raring(13.04) quantal(12.10) precise(12.04) oneiric(11.10) natty(11.04)** ####(脚本中请删除或注释掉本段####**####)
	apt-get update >> /dev/null 2> /tmp/${NAME}_apt_add_key.txt
	key=`cat /tmp/${NAME}_apt_add_key.txt | cut -d":" -f6 | cut -d" " -f3`
	apt-key adv --keyserver keyserver.ubuntu.com --recv-keys $key
	rm -rf /tmp/${NAME}_apt_add_key.txt
  fi
else
  echo "Utility to add PPA repositories in your debian machine"
  echo "$0 ppa:user/ppa-name"
fi

保存这个脚本到/usr/bin目录下，名称为add-apt-repository，然后执行下列命令即可：

== $ sudo chmod +x /usr/bin/add-apt-repository ==

== $ sudo chown root:root /usr/bin/add-apt-repository ==

现在我们也可以使用 add-apt-repository 命令进行软件安装了。

  $ sudo add-apt-repository ppa: name
（删除用sudo add-apt-repository -r ppa:repository-name/subdirectory）

#########注#######
add-apt-repository 命令（实质是个Python脚本,依赖python-software-properties包，apt-get install python-software-properties）在source.list里添加 ppa 源,同时完成导入key.故可以手动安装：
1. https://launchpad.net/ubuntu/+ppas 搜索包名并找到Siging key(或Fingerprint后8位)（例如https://launchpad.net/~colin-duquesnoy/+archive/ubuntu/stable）
2. vi [[/etc/apt/sources.list]]
	deb http://ppa.launchpad.net/colin-duquesnoy/stable/ubuntu YOUR_UBUNTU_VERSION_HERE main 
	deb-src http://ppa.launchpad.net/colin-duquesnoy/stable/ubuntu YOUR_UBUNTU_VERSION_HERE main 
3. sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 78E01251
4. sudo apt-get update（升级软件包仓库）
sudo apt-get install xxx



